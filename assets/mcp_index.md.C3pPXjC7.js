import{_ as i,c as a,o as n,ae as l}from"./chunks/framework.BGWP4WZ_.js";const E=JSON.parse('{"title":"MCP å¼€å‘æŒ‡å—","description":"","frontmatter":{},"headers":[],"relativePath":"mcp/index.md","filePath":"mcp/index.md"}'),t={name:"mcp/index.md"};function h(p,s,e,k,r,o){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="mcp-å¼€å‘æŒ‡å—" tabindex="-1">MCP å¼€å‘æŒ‡å— <a class="header-anchor" href="#mcp-å¼€å‘æŒ‡å—" aria-label="Permalink to &quot;MCP å¼€å‘æŒ‡å—&quot;">â€‹</a></h1><p>MCP (Model Context Protocol) æ˜¯ä¸€ä¸ªç”¨äºAIå·¥å…·æ‰©å±•çš„å¼€æ”¾æ ‡å‡†åè®®ã€‚æœ¬é¡¹ç›®åŸºäº MCP å®ç°äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§åŠŸèƒ½æ¨¡å—çš„æ— ç¼é›†æˆã€‚</p><h2 id="ğŸ“–-æ–‡æ¡£å¯¼èˆª" tabindex="-1">ğŸ“– æ–‡æ¡£å¯¼èˆª <a class="header-anchor" href="#ğŸ“–-æ–‡æ¡£å¯¼èˆª" aria-label="Permalink to &quot;ğŸ“– æ–‡æ¡£å¯¼èˆª&quot;">â€‹</a></h2><ul><li><strong><a href="#ç³»ç»Ÿæ¶æ„">ğŸ”§ å†…ç½®MCPå¼€å‘æŒ‡å—</a></strong> - æœ¬æ–‡æ¡£ï¼šå¼€å‘å’Œä½¿ç”¨å†…ç½®MCPå·¥å…·</li><li><strong><a href="./xiaozhi-mcp.html">ğŸ”Œ å¤–æŒ‚MCPæ¥å…¥æŒ‡å—</a></strong> - å¤–éƒ¨MCPæœåŠ¡æ¥å…¥å’Œç¤¾åŒºé¡¹ç›®é›†æˆ</li></ul><blockquote><p>ğŸ’¡ <strong>é€‰æ‹©æŒ‡å—</strong>: å¦‚æœä½ æƒ³å¼€å‘æ–°çš„å†…ç½®å·¥å…·ï¼Œè¯·å‚è€ƒæœ¬æ–‡æ¡£ï¼›å¦‚æœä½ æƒ³æ¥å…¥å¤–éƒ¨MCPæœåŠ¡æˆ–äº†è§£ç¤¾åŒºé¡¹ç›®ï¼Œè¯·æŸ¥çœ‹<a href="./xiaozhi-mcp.html">å¤–æŒ‚æ¥å…¥æŒ‡å—</a>ã€‚</p></blockquote><h2 id="ç³»ç»Ÿæ¶æ„" tabindex="-1">ç³»ç»Ÿæ¶æ„ <a class="header-anchor" href="#ç³»ç»Ÿæ¶æ„" aria-label="Permalink to &quot;ç³»ç»Ÿæ¶æ„&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒç»„ä»¶" tabindex="-1">æ ¸å¿ƒç»„ä»¶ <a class="header-anchor" href="#æ ¸å¿ƒç»„ä»¶" aria-label="Permalink to &quot;æ ¸å¿ƒç»„ä»¶&quot;">â€‹</a></h3><h4 id="_1-mcp-æœåŠ¡å™¨-src-mcp-mcp-server-py" tabindex="-1">1. MCP æœåŠ¡å™¨ (<code>src/mcp/mcp_server.py</code>) <a class="header-anchor" href="#_1-mcp-æœåŠ¡å™¨-src-mcp-mcp-server-py" aria-label="Permalink to &quot;1. MCP æœåŠ¡å™¨ (\`src/mcp/mcp_server.py\`)&quot;">â€‹</a></h4><ul><li><strong>åŸºäº JSON-RPC 2.0 åè®®</strong>: ç¬¦åˆ MCP æ ‡å‡†è§„èŒƒ</li><li><strong>å•ä¾‹æ¨¡å¼</strong>: å…¨å±€ç»Ÿä¸€çš„æœåŠ¡å™¨å®ä¾‹ç®¡ç†</li><li><strong>å·¥å…·æ³¨å†Œç³»ç»Ÿ</strong>: æ”¯æŒåŠ¨æ€æ·»åŠ å’Œç®¡ç†å·¥å…·</li><li><strong>å‚æ•°éªŒè¯</strong>: å®Œæ•´çš„ç±»å‹æ£€æŸ¥å’Œå‚æ•°éªŒè¯æœºåˆ¶</li><li><strong>é”™è¯¯å¤„ç†</strong>: æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”å’Œå¼‚å¸¸å¤„ç†</li></ul><h4 id="_2-å·¥å…·å±æ€§ç³»ç»Ÿ" tabindex="-1">2. å·¥å…·å±æ€§ç³»ç»Ÿ <a class="header-anchor" href="#_2-å·¥å…·å±æ€§ç³»ç»Ÿ" aria-label="Permalink to &quot;2. å·¥å…·å±æ€§ç³»ç»Ÿ&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å±æ€§ç±»å‹å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PropertyType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;boolean&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    STRING</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;string&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å±æ€§å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@dataclass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: PropertyType</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    default_value: Optional[Any] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    min_value: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    max_value: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre></div><h4 id="_3-å·¥å…·å®šä¹‰ç»“æ„" tabindex="-1">3. å·¥å…·å®šä¹‰ç»“æ„ <a class="header-anchor" href="#_3-å·¥å…·å®šä¹‰ç»“æ„" aria-label="Permalink to &quot;3. å·¥å…·å®šä¹‰ç»“æ„&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@dataclass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McpTool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  # å·¥å…·åç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    description: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # å·¥å…·æè¿°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    properties: PropertyList   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‚æ•°åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    callback: Callable         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å›è°ƒå‡½æ•°</span></span></code></pre></div><h3 id="å·¥å…·ç®¡ç†å™¨æ¶æ„" tabindex="-1">å·¥å…·ç®¡ç†å™¨æ¶æ„ <a class="header-anchor" href="#å·¥å…·ç®¡ç†å™¨æ¶æ„" aria-label="Permalink to &quot;å·¥å…·ç®¡ç†å™¨æ¶æ„&quot;">â€‹</a></h3><p>æ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æœ‰å¯¹åº”çš„ç®¡ç†å™¨ç±»ï¼Œè´Ÿè´£ï¼š</p><ul><li>å·¥å…·çš„åˆå§‹åŒ–å’Œæ³¨å†Œ</li><li>ä¸šåŠ¡é€»è¾‘çš„å°è£…</li><li>ä¸åº•å±‚æœåŠ¡çš„äº¤äº’</li></ul><h4 id="ç°æœ‰å·¥å…·æ¨¡å—" tabindex="-1">ç°æœ‰å·¥å…·æ¨¡å— <a class="header-anchor" href="#ç°æœ‰å·¥å…·æ¨¡å—" aria-label="Permalink to &quot;ç°æœ‰å·¥å…·æ¨¡å—&quot;">â€‹</a></h4><ol><li><p><strong>ç³»ç»Ÿå·¥å…· (<code>src/mcp/tools/system/</code>)</strong></p><ul><li>è®¾å¤‡çŠ¶æ€ç›‘æ§</li><li>åº”ç”¨ç¨‹åºç®¡ç†ï¼ˆå¯åŠ¨ã€ç»ˆæ­¢ã€æ‰«æï¼‰</li><li>ç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢</li></ul></li><li><p><strong>æ—¥ç¨‹ç®¡ç† (<code>src/mcp/tools/calendar/</code>)</strong></p><ul><li>æ—¥ç¨‹çš„å¢åˆ æ”¹æŸ¥</li><li>æ™ºèƒ½æ—¶é—´è§£æ</li><li>å†²çªæ£€æµ‹</li><li>æé†’æœåŠ¡</li></ul></li><li><p><strong>å®šæ—¶å™¨ (<code>src/mcp/tools/timer/</code>)</strong></p><ul><li>å€’è®¡æ—¶å™¨ç®¡ç†</li><li>ä»»åŠ¡è°ƒåº¦</li><li>æ—¶é—´æé†’</li></ul></li><li><p><strong>éŸ³ä¹æ’­æ”¾ (<code>src/mcp/tools/music/</code>)</strong></p><ul><li>éŸ³ä¹æ’­æ”¾æ§åˆ¶</li><li>æ’­æ”¾åˆ—è¡¨ç®¡ç†</li><li>éŸ³é‡æ§åˆ¶</li></ul></li><li><p><strong>é“è·¯æŸ¥è¯¢ (<code>src/mcp/tools/railway/</code>)</strong></p><ul><li>12306 è½¦æ¬¡æŸ¥è¯¢</li><li>è½¦ç«™ä¿¡æ¯æŸ¥è¯¢</li><li>ç¥¨ä»·æŸ¥è¯¢</li></ul></li><li><p><strong>æœç´¢å·¥å…· (<code>src/mcp/tools/search/</code>)</strong></p><ul><li>ç½‘ç»œæœç´¢</li><li>ä¿¡æ¯æ£€ç´¢</li><li>ç»“æœè¿‡æ»¤</li></ul></li><li><p><strong>èœè°±å·¥å…· (<code>src/mcp/tools/recipe/</code>)</strong></p><ul><li>èœè°±æŸ¥è¯¢</li><li>é£Ÿè°±æ¨è</li><li>è¥å…»ä¿¡æ¯</li></ul></li><li><p><strong>ç›¸æœºå·¥å…· (<code>src/mcp/tools/camera/</code>)</strong></p><ul><li>æ‹ç…§åŠŸèƒ½</li><li>è§†è§‰é—®ç­”</li><li>å›¾åƒåˆ†æ</li></ul></li><li><p><strong>åœ°å›¾å·¥å…· (<code>src/mcp/tools/amap/</code>)</strong></p><ul><li>åœ°ç†ç¼–ç /é€†åœ°ç†ç¼–ç </li><li>è·¯å¾„è§„åˆ’</li><li>å¤©æ°”æŸ¥è¯¢</li><li>POI æœç´¢</li></ul></li><li><p><strong>å…«å­—å‘½ç† (<code>src/mcp/tools/bazi/</code>)</strong></p><ul><li>å…«å­—è®¡ç®—</li><li>å‘½ç†åˆ†æ</li><li>åˆå©šåˆ†æ</li><li>é»„å†æŸ¥è¯¢</li></ul></li></ol><h2 id="å·¥å…·å¼€å‘æŒ‡å—" tabindex="-1">å·¥å…·å¼€å‘æŒ‡å— <a class="header-anchor" href="#å·¥å…·å¼€å‘æŒ‡å—" aria-label="Permalink to &quot;å·¥å…·å¼€å‘æŒ‡å—&quot;">â€‹</a></h2><h3 id="_1-åˆ›å»ºæ–°å·¥å…·æ¨¡å—" tabindex="-1">1. åˆ›å»ºæ–°å·¥å…·æ¨¡å— <a class="header-anchor" href="#_1-åˆ›å»ºæ–°å·¥å…·æ¨¡å—" aria-label="Permalink to &quot;1. åˆ›å»ºæ–°å·¥å…·æ¨¡å—&quot;">â€‹</a></h3><p>åˆ›å»ºæ–°çš„å·¥å…·æ¨¡å—éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p><h4 id="æ­¥éª¤-1-åˆ›å»ºæ¨¡å—ç›®å½•" tabindex="-1">æ­¥éª¤ 1: åˆ›å»ºæ¨¡å—ç›®å½• <a class="header-anchor" href="#æ­¥éª¤-1-åˆ›å»ºæ¨¡å—ç›®å½•" aria-label="Permalink to &quot;æ­¥éª¤ 1: åˆ›å»ºæ¨¡å—ç›®å½•&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/mcp/tools/your_tool_name</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/mcp/tools/your_tool_name</span></span></code></pre></div><h4 id="æ­¥éª¤-2-åˆ›å»ºå¿…è¦æ–‡ä»¶" tabindex="-1">æ­¥éª¤ 2: åˆ›å»ºå¿…è¦æ–‡ä»¶ <a class="header-anchor" href="#æ­¥éª¤-2-åˆ›å»ºå¿…è¦æ–‡ä»¶" aria-label="Permalink to &quot;æ­¥éª¤ 2: åˆ›å»ºå¿…è¦æ–‡ä»¶&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> __init__.py</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manager.py</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # ç®¡ç†å™¨ç±»</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tools.py</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å·¥å…·å‡½æ•°å®ç°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> models.py</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # æ•°æ®æ¨¡å‹ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> client.py</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # å®¢æˆ·ç«¯ç±»ï¼ˆå¯é€‰ï¼‰</span></span></code></pre></div><h4 id="æ­¥éª¤-3-å®ç°ç®¡ç†å™¨ç±»" tabindex="-1">æ­¥éª¤ 3: å®ç°ç®¡ç†å™¨ç±» <a class="header-anchor" href="#æ­¥éª¤-3-å®ç°ç®¡ç†å™¨ç±»" aria-label="Permalink to &quot;æ­¥éª¤ 3: å®ç°ç®¡ç†å™¨ç±»&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># manager.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> YourToolManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆå§‹åŒ–ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init_tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, add_tool, PropertyList, Property, PropertyType):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        åˆå§‹åŒ–å¹¶æ³¨å†Œå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å®šä¹‰å·¥å…·å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tool_props </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PropertyList([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Property(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;param1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PropertyType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">STRING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Property(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;param2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PropertyType.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ³¨å†Œå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        add_tool((</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;tool_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;å·¥å…·æè¿°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            tool_props,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            your_tool_function</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¨å±€ç®¡ç†å™¨å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_your_tool_manager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _manager</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> YourToolManager()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _manager</span></span></code></pre></div><h4 id="æ­¥éª¤-4-å®ç°å·¥å…·å‡½æ•°" tabindex="-1">æ­¥éª¤ 4: å®ç°å·¥å…·å‡½æ•° <a class="header-anchor" href="#æ­¥éª¤-4-å®ç°å·¥å…·å‡½æ•°" aria-label="Permalink to &quot;æ­¥éª¤ 4: å®ç°å·¥å…·å‡½æ•°&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tools.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> your_tool_function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(args: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    å·¥å…·å‡½æ•°å®ç°</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    param1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;param1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    param2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;param2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform_operation(param1, param2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ“ä½œç»“æœ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><h4 id="æ­¥éª¤-5-æ³¨å†Œåˆ°ä¸»æœåŠ¡å™¨" tabindex="-1">æ­¥éª¤ 5: æ³¨å†Œåˆ°ä¸»æœåŠ¡å™¨ <a class="header-anchor" href="#æ­¥éª¤-5-æ³¨å†Œåˆ°ä¸»æœåŠ¡å™¨" aria-label="Permalink to &quot;æ­¥éª¤ 5: æ³¨å†Œåˆ°ä¸»æœåŠ¡å™¨&quot;">â€‹</a></h4><p>åœ¨ <code>src/mcp/mcp_server.py</code> çš„ <code>add_common_tools</code> æ–¹æ³•ä¸­æ·»åŠ ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ ä½ çš„å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.mcp.tools.your_tool_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_your_tool_manager</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_tool_manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_your_tool_manager()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_tool_manager.init_tools(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.add_tool, PropertyList, Property, PropertyType)</span></span></code></pre></div><h3 id="_2-æœ€ä½³å®è·µ" tabindex="-1">2. æœ€ä½³å®è·µ <a class="header-anchor" href="#_2-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;2. æœ€ä½³å®è·µ&quot;">â€‹</a></h3><h4 id="å·¥å…·å‘½åè§„èŒƒ" tabindex="-1">å·¥å…·å‘½åè§„èŒƒ <a class="header-anchor" href="#å·¥å…·å‘½åè§„èŒƒ" aria-label="Permalink to &quot;å·¥å…·å‘½åè§„èŒƒ&quot;">â€‹</a></h4><ul><li>ä½¿ç”¨ <code>self.module.action</code> æ ¼å¼</li><li>ä¾‹å¦‚ï¼š<code>self.calendar.create_event</code>ã€<code>self.music.play</code></li></ul><h4 id="å‚æ•°è®¾è®¡" tabindex="-1">å‚æ•°è®¾è®¡ <a class="header-anchor" href="#å‚æ•°è®¾è®¡" aria-label="Permalink to &quot;å‚æ•°è®¾è®¡&quot;">â€‹</a></h4><ul><li>å¿…éœ€å‚æ•°ä¸è®¾é»˜è®¤å€¼</li><li>å¯é€‰å‚æ•°è®¾ç½®åˆç†çš„é»˜è®¤å€¼</li><li>ä½¿ç”¨åˆé€‚çš„å‚æ•°ç±»å‹ï¼ˆSTRINGã€INTEGERã€BOOLEANï¼‰</li></ul><h4 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;é”™è¯¯å¤„ç†&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> your_tool_function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(args: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform_operation(args)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æˆåŠŸ: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.error(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·¥å…·æ‰§è¡Œå¤±è´¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é”™è¯¯: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><h4 id="å¼‚æ­¥æ”¯æŒ" tabindex="-1">å¼‚æ­¥æ”¯æŒ <a class="header-anchor" href="#å¼‚æ­¥æ”¯æŒ" aria-label="Permalink to &quot;å¼‚æ­¥æ”¯æŒ&quot;">â€‹</a></h4><ul><li>ä¼˜å…ˆä½¿ç”¨ async/await</li><li>æ”¯æŒåŒæ­¥å‡½æ•°çš„è‡ªåŠ¨åŒ…è£…</li><li>åˆç†ä½¿ç”¨ asyncio å·¥å…·</li></ul><h3 id="_3-å·¥å…·æè¿°ç¼–å†™" tabindex="-1">3. å·¥å…·æè¿°ç¼–å†™ <a class="header-anchor" href="#_3-å·¥å…·æè¿°ç¼–å†™" aria-label="Permalink to &quot;3. å·¥å…·æè¿°ç¼–å†™&quot;">â€‹</a></h3><p>å·¥å…·æè¿°åº”åŒ…å«ï¼š</p><ul><li>åŠŸèƒ½ç®€ä»‹</li><li>ä½¿ç”¨åœºæ™¯</li><li>å‚æ•°è¯´æ˜</li><li>è¿”å›æ ¼å¼</li><li>æ³¨æ„äº‹é¡¹</li></ul><p>ç¤ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">åˆ›å»ºæ–°çš„æ—¥ç¨‹äº‹ä»¶ï¼Œæ”¯æŒæ™ºèƒ½æ—¶é—´è®¾ç½®å’Œå†²çªæ£€æµ‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ä½¿ç”¨åœºæ™¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1. å®‰æ’ä¼šè®®æˆ–çº¦ä¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2. è®¾ç½®æé†’äº‹é¡¹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3. æ—¶é—´ç®¡ç†è§„åˆ’</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å‚æ•°ï¼š</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  title: äº‹ä»¶æ ‡é¢˜ï¼ˆå¿…éœ€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  start_time: å¼€å§‹æ—¶é—´ï¼ŒISOæ ¼å¼ï¼ˆå¿…éœ€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  end_time: ç»“æŸæ—¶é—´ï¼Œå¯è‡ªåŠ¨è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  description: äº‹ä»¶æè¿°</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  category: äº‹ä»¶åˆ†ç±»</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  reminder_minutes: æé†’æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è¿”å›ï¼šåˆ›å»ºæˆåŠŸæˆ–å¤±è´¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span></code></pre></div><h2 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h2><h3 id="æ—¥ç¨‹ç®¡ç†" tabindex="-1">æ—¥ç¨‹ç®¡ç† <a class="header-anchor" href="#æ—¥ç¨‹ç®¡ç†" aria-label="Permalink to &quot;æ—¥ç¨‹ç®¡ç†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ—¥ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.calendar.create_event&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å›¢é˜Ÿä¼šè®®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;start_time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01T10:00:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¼šè®®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;reminder_minutes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥è¯¢ä»Šæ—¥æ—¥ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.calendar.get_events&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;date_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;today&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="åœ°å›¾åŠŸèƒ½" tabindex="-1">åœ°å›¾åŠŸèƒ½ <a class="header-anchor" href="#åœ°å›¾åŠŸèƒ½" aria-label="Permalink to &quot;åœ°å›¾åŠŸèƒ½&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ°å€è½¬ç»çº¬åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.amap.geocode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;address&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŒ—äº¬å¸‚å¤©å®‰é—¨å¹¿åœº&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·¯å¾„è§„åˆ’</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.amap.direction_walking&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;116.397428,39.90923&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;destination&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;116.390813,39.904368&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="å…«å­—å‘½ç†" tabindex="-1">å…«å­—å‘½ç† <a class="header-anchor" href="#å…«å­—å‘½ç†" aria-label="Permalink to &quot;å…«å­—å‘½ç†&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–å…«å­—åˆ†æ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.bazi.get_bazi_detail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;solar_datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2008-03-01T13:00:00+08:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;gender&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå©šåˆ†æ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp_server.call_tool(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;self.bazi.analyze_marriage_compatibility&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;male_solar_datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1990-01-01T10:00:00+08:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;female_solar_datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1992-05-15T14:30:00+08:00&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="é«˜çº§ç‰¹æ€§" tabindex="-1">é«˜çº§ç‰¹æ€§ <a class="header-anchor" href="#é«˜çº§ç‰¹æ€§" aria-label="Permalink to &quot;é«˜çº§ç‰¹æ€§&quot;">â€‹</a></h2><h3 id="_1-å‚æ•°éªŒè¯" tabindex="-1">1. å‚æ•°éªŒè¯ <a class="header-anchor" href="#_1-å‚æ•°éªŒè¯" aria-label="Permalink to &quot;1. å‚æ•°éªŒè¯&quot;">â€‹</a></h3><p>ç³»ç»Ÿæä¾›å®Œæ•´çš„å‚æ•°éªŒè¯æœºåˆ¶ï¼š</p><ul><li>ç±»å‹æ£€æŸ¥</li><li>èŒƒå›´éªŒè¯</li><li>å¿…éœ€å‚æ•°æ£€æŸ¥</li><li>é»˜è®¤å€¼å¤„ç†</li></ul><h3 id="_2-å·¥å…·å‘ç°" tabindex="-1">2. å·¥å…·å‘ç° <a class="header-anchor" href="#_2-å·¥å…·å‘ç°" aria-label="Permalink to &quot;2. å·¥å…·å‘ç°&quot;">â€‹</a></h3><p>æ”¯æŒåŠ¨æ€å·¥å…·å‘ç°å’Œåˆ—è¡¨è·å–ï¼š</p><ul><li>åˆ†é¡µæ”¯æŒ</li><li>å¤§å°é™åˆ¶</li><li>æ¸¸æ ‡éå†</li></ul><h3 id="_3-è§†è§‰èƒ½åŠ›" tabindex="-1">3. è§†è§‰èƒ½åŠ› <a class="header-anchor" href="#_3-è§†è§‰èƒ½åŠ›" aria-label="Permalink to &quot;3. è§†è§‰èƒ½åŠ›&quot;">â€‹</a></h3><p>æ”¯æŒè§†è§‰ç›¸å…³åŠŸèƒ½ï¼š</p><ul><li>å›¾åƒåˆ†æ</li><li>è§†è§‰é—®ç­”</li><li>é…ç½®å¤–éƒ¨è§†è§‰æœåŠ¡</li></ul><h3 id="_4-å¹¶å‘å¤„ç†" tabindex="-1">4. å¹¶å‘å¤„ç† <a class="header-anchor" href="#_4-å¹¶å‘å¤„ç†" aria-label="Permalink to &quot;4. å¹¶å‘å¤„ç†&quot;">â€‹</a></h3><ul><li>å¼‚æ­¥å·¥å…·æ‰§è¡Œ</li><li>ä»»åŠ¡è°ƒåº¦</li><li>èµ„æºç®¡ç†</li></ul><h2 id="è°ƒè¯•å’Œæµ‹è¯•" tabindex="-1">è°ƒè¯•å’Œæµ‹è¯• <a class="header-anchor" href="#è°ƒè¯•å’Œæµ‹è¯•" aria-label="Permalink to &quot;è°ƒè¯•å’Œæµ‹è¯•&quot;">â€‹</a></h2><h3 id="æ—¥å¿—ç³»ç»Ÿ" tabindex="-1">æ—¥å¿—ç³»ç»Ÿ <a class="header-anchor" href="#æ—¥å¿—ç³»ç»Ÿ" aria-label="Permalink to &quot;æ—¥å¿—ç³»ç»Ÿ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.utils.logging_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_logger</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_logger(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__name__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·¥å…·æ‰§è¡Œå¼€å§‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.error(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‰§è¡Œå¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exc_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="æµ‹è¯•å·¥å…·" tabindex="-1">æµ‹è¯•å·¥å…· <a class="header-anchor" href="#æµ‹è¯•å·¥å…·" aria-label="Permalink to &quot;æµ‹è¯•å·¥å…·&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æµ‹è¯•å·¥å…·æ³¨å†Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> McpServer.get_instance()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.add_common_tools()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æµ‹è¯•å·¥å…·è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.parse_message({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;jsonrpc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tools/call&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;params&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_tool_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;arguments&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;param1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="éƒ¨ç½²å’Œé…ç½®" tabindex="-1">éƒ¨ç½²å’Œé…ç½® <a class="header-anchor" href="#éƒ¨ç½²å’Œé…ç½®" aria-label="Permalink to &quot;éƒ¨ç½²å’Œé…ç½®&quot;">â€‹</a></h2><h3 id="ç¯å¢ƒè¦æ±‚" tabindex="-1">ç¯å¢ƒè¦æ±‚ <a class="header-anchor" href="#ç¯å¢ƒè¦æ±‚" aria-label="Permalink to &quot;ç¯å¢ƒè¦æ±‚&quot;">â€‹</a></h3><ul><li>Python 3.8+</li><li>å¼‚æ­¥æ”¯æŒ</li><li>ç›¸å…³ä¾èµ–åº“</li></ul><h3 id="é…ç½®æ–‡ä»¶" tabindex="-1">é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><p>å·¥å…·é…ç½®é€šè¿‡ <code>config/config.json</code> è¿›è¡Œç®¡ç†ï¼Œæ”¯æŒï¼š</p><ul><li>API å¯†é’¥é…ç½®</li><li>æœåŠ¡ç«¯ç‚¹è®¾ç½®</li><li>åŠŸèƒ½å¼€å…³æ§åˆ¶</li></ul><h3 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>è¿æ¥æ± ç®¡ç†</li><li>ç¼“å­˜ç­–ç•¥</li><li>å¹¶å‘æ§åˆ¶</li><li>èµ„æºå›æ”¶</li></ul><h2 id="æ•…éšœæ’é™¤" tabindex="-1">æ•…éšœæ’é™¤ <a class="header-anchor" href="#æ•…éšœæ’é™¤" aria-label="Permalink to &quot;æ•…éšœæ’é™¤&quot;">â€‹</a></h2><h3 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">â€‹</a></h3><ol><li><strong>å·¥å…·æ³¨å†Œå¤±è´¥</strong>: æ£€æŸ¥ç®¡ç†å™¨å•ä¾‹å’Œå¯¼å…¥è·¯å¾„</li><li><strong>å‚æ•°éªŒè¯é”™è¯¯</strong>: ç¡®è®¤å‚æ•°ç±»å‹å’Œå¿…éœ€æ€§</li><li><strong>å¼‚æ­¥è°ƒç”¨é—®é¢˜</strong>: ç¡®ä¿æ­£ç¡®ä½¿ç”¨ async/await</li><li><strong>ä¾èµ–ç¼ºå¤±</strong>: æ£€æŸ¥æ¨¡å—å¯¼å…¥å’Œä¾èµ–å®‰è£…</li></ol><h3 id="è°ƒè¯•æŠ€å·§" tabindex="-1">è°ƒè¯•æŠ€å·§ <a class="header-anchor" href="#è°ƒè¯•æŠ€å·§" aria-label="Permalink to &quot;è°ƒè¯•æŠ€å·§&quot;">â€‹</a></h3><ul><li>å¯ç”¨è¯¦ç»†æ—¥å¿—</li><li>ä½¿ç”¨è°ƒè¯•å·¥å…·</li><li>å•å…ƒæµ‹è¯•éªŒè¯</li><li>æ€§èƒ½åˆ†æå·¥å…·</li></ul>`,83)]))}const g=i(t,[["render",h]]);export{E as __pageData,g as default};
